<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NGen: Github Automated Testing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NGen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_doc_2_a_u_t_o_m_a_t_e_d___t_e_s_t.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Github Automated Testing</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md23"></a></p>
<ul>
<li>What Are Automated Tests and How to Start Them</li>
<li>What Code Tests Are Performed</li>
<li>Local Testing</li>
<li>What to Do When a Test Fail</li>
</ul>
<h1><a class="anchor" id="autotoc_md24"></a>
What Are Automated Tests and How to Start Them</h1>
<p>In the <b>ngen</b> github repo, we use github actions/workflows (for an online reference, see for <a href="https://docs.github.com/en/actions/learn-github-actions">example</a>) to automatically test validity of committed codes by developers. The test is triggered when a developer pushes some code to a branch in their <b>ngen</b> fork and creates a <code>Pull Request</code>. The successful test is marked by a <code>green check</code> mark, a failed test is marked by a <code>red cross</code> mark. If a test fails, you have to debug your code (see What to Do When a Test Fail below) and commit/push to the same branch again. The automatic testing will restart in the <code>Pull Request</code>.</p>
<h1><a class="anchor" id="autotoc_md25"></a>
What Code Tests Are Performed</h1>
<ul>
<li>Unit tests: this includes every set of codes that serves a unique functionality. Unit test evolve as new codes are added.</li>
<li><a href="https://bmi.readthedocs.io/en/stable/">BMI</a> (Basic Model Interface) based formulation tests for C, C++, Fortran, and Python.</li>
<li>Running <b>ngen</b> executable on example hydrofabric with various realistic modules/models, initial condition, and forcing data.</li>
</ul>
<h1><a class="anchor" id="autotoc_md26"></a>
Local Testing</h1>
<p>We strongly recommend you run all the tests on your local computer before you push up the new codes to the branch in your fork. To be able to run the tests, when building the executables (for <code>build</code> with <code>cmake</code> see <a href="https://github.com/stcui007/ngen/blob/ngen_automated_test/doc/BUILDS_AND_CMAKE.md">here</a>), you need to set the test option to <code>ON</code> using <code>cmake</code> option: </p><pre class="fragment">-DNGEN_WITH_TESTS:BOOL=ON
</pre><p>After <code>build</code> completes, assuming your build directory is <code>cmake_build</code>, you can check that the <code>ngen</code> executable is in <code>cmake_build</code> directory, and all <code>unit test</code> executables are in <code>cmake_build/test</code> directory. To run a unit test, for example, run the following command while in the top project directory: </p><pre class="fragment">./cmake_build/test/test_unit
</pre><p>There are many other unit test executables you need to run for a complete test. For example, to run an <b>ngen</b> test job using the data set in the <code>data</code> directory, use the following command: </p><pre class="fragment">./cmake_build/ngen data/catchment_data.geojson '' data/nexus_data.geojson '' data/example_bmi_multi_realization_config.json
</pre><p>To run a multi-processors job with MPI, please see a complete description in <a href="https://github.com/stcui007/ngen/blob/ngen_automated_test/doc/DISTRIBUTED_PROCESSING.md">here</a></p>
<h1><a class="anchor" id="autotoc_md27"></a>
What to Do When a Test Fail</h1>
<ul>
<li>Before getting into debugging, first thing, we recommend that you perform all the necessary tests listed above on you local computer. If all tests are successful, then push up your codes to the intended branch in your fork.</li>
<li>Sometimes, some tests may fail even they have passed tests on local computer. If that happens, you have to look into details why they failed. To do that, click on the word <code>Details</code> in blue on the right for a particular test. This will open a window with detailed information for that particular test, the error information are usually near the bottom. You can scroll up and down the side bar for more information. you can also search by key workds in <code>Search logs</code> menu entry at the upper right corner.</li>
<li>Otherwise, if you are lucky (or unlucky depending on your perspective), the test may have failed due to time out or some unknown reasons, in those cases, you may rerun the test by placing the cursor on the test name, a cycling icon will appear and you can rerun your test by clicking on the icon. In any case, you may manually rerun any failed test by following procedure described above. But it is strongly recommended that you carefully examine the fail error first. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jan 31 2025 15:10:13 for NGen by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
