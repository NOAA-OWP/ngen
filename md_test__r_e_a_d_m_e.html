<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NGen: Testing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NGen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_test__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Testing </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>Testing Frameworks</li>
<li>Executing Automated Tests</li>
<li>Creating New Automated Tests</li>
</ul>
<h1><a class="anchor" id="autotoc_md226"></a>
Testing Frameworks</h1>
<ul>
<li>Google Test</li>
</ul>
<p >Note: At present (<code>0.1.0</code>), there are no testing frameworks incorporated for automatically testing non-C++ code. These may be added in the future.</p>
<h2><a class="anchor" id="autotoc_md227"></a>
&lt;strong&gt;Google Test&lt;/strong&gt;</h2>
<p >The project uses the <b>Google Test</b> framework for automated C++ tests. Its source code and documentation can be found <a href="https://github.com/google/googletest">here</a>. It is included as a <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">Git Submodule</a>, so the submodule must be initialized locally, a step not automatically performed by default when cloning the repo. <br  />
</p>
<p >Initializing can be done by running the following command from the project root: </p><pre class="fragment">git submodule update --init --recursive -- test/googletest
</pre><p> Additionally, this command can be re-run to sync the local submodule working tree with the state expected upstream. I.e., if this project gets updated to utilize a new version of <b>Google Test</b>, the command above can be run again locally to make sure the local copy also gets moved to that version.</p>
<p >See the <code>git help submodule</code> command for more information.</p>
<h3><a class="anchor" id="autotoc_md228"></a>
(Re)generating CMake Project Buildsystem</h3>
<p >The CMake buildsystem will need to either be generated or regenerated after the submodule is initialized. <br  />
</p>
<p >Regenerating just requires an initial step of removing the/an existing CMake build directory (frequently something like <code>cmake-build-debug/</code> in the project root).</p>
<p >If/once the desired build directory does not exist, use an appropriate CMake command to generate the buildsystem. E.g.: </p><pre class="fragment">cmake -DCMAKE_BUILD_TYPE=Debug -B cmake-build-debug -S .
</pre> <h1><a class="anchor" id="autotoc_md229"></a>
Executing Automated Tests</h1>
<ul>
<li>C++ Tests</li>
</ul>
<h2><a class="anchor" id="autotoc_md230"></a>
C++ Tests</h2>
<p >The basic process for executing a group of C++ tests is:</p>
<ul>
<li>execute an appropriate CMake test target<ul>
<li>this generates an executable tests file</li>
</ul>
</li>
<li>execute the generated tests file</li>
</ul>
<h3><a class="anchor" id="autotoc_md231"></a>
Test Targets and Executables</h3>
<p >There are several CMake testing executables/targets configured in <a href="./CMakeLists.txt">/test/CMakeLists.txt</a>, discussed in the section on adding tests to CMake builds. The primary ones, corresponding to important collections of tests, are:</p>
<ul>
<li><code>test_unit</code> for all unit tests</li>
<li><code>test_integration</code> for all integration tests</li>
<li><code>test_all</code> for all unit and integration tests</li>
</ul>
<p ><em>Note</em>: make sure the CMake build system is (re)generated before trying to build the targets below.</p>
<p >When built with CMake, these and other similar targets each produce a target-specific test executable file. E.g.: </p><pre class="fragment">cmake --build cmake-build-dir --target test_unit -- -j 4
</pre><p> This produces an executable test file <code>cmake-build-dir/test/test_unit</code>, which can then be used to run the configured collection of tests: </p><pre class="fragment">./cmake-build-dir/test/test_unit
</pre><p> It is also possible to add the <code>--gtest_filter=</code> flag followed by a colon-delimited series of tests' <em>full names</em>. <b>Google Test</b> defines the <em>full name</em> of a test as: </p><pre class="fragment">test_suite_name.test_name
</pre><p> For example: </p><pre class="fragment">./cmake-build-dir/test/test_unit --gtest_filter=HymodKernelTest.TestCalcET0:HymodKernelTest.TestRun0
</pre> <h1><a class="anchor" id="autotoc_md232"></a>
Creating New Automated Tests</h1>
<p >Automated testing design and infrastructure for this project are somewhat fluid while this project is in its early stages. The only strict rules are (as of <code>0.1.0</code>):</p>
<ul>
<li>C++ tests should use the <b>Google Test</b> framework</li>
<li>C++ tests should be added to the CMake build via <a href="./CMakeLists.txt">/test/CMakeLists.txt</a>, as described here</li>
<li>test code should be placed under the <a href="../test">/test/</a> directory</li>
</ul>
<p >However, there are a few rules of thumb discussed below to consider as the process matures in its early stages.</p>
<h2><a class="anchor" id="autotoc_md233"></a>
Adding Tests to CMake Builds</h2>
<p >Tests should be added to the CMake build using <a href="./CMakeLists.txt">/test/CMakeLists.txt</a>. Within that file, there are several test targets that are already defined, using either the <code>add_automated_test()</code> or <code>add_automated_test_w_mock()</code> macro. In particular:</p>
<ul>
<li><code>test_unit</code> for all unit tests</li>
<li><code>test_integration</code> for all integration tests</li>
<li><code>test_all</code> for all unit and integration tests</li>
</ul>
<p >These and other similar targets are configured (using either the <code>add_automated_test()</code> or <code>add_automated_test_w_mock()</code> macro) with the applicable <code>*.cpp</code> files that have the code for tests that should be included in the particular target. <br  />
</p>
<p >Existing target configurations must be updated with the test file for any newly added tests, assuming the file is not already configured. <br  />
</p>
<h2><a class="anchor" id="autotoc_md234"></a>
Test Creation Rules of Thumb</h2>
<p >There are few additional rules of thumb to keep in mind when creating new tests. These are not set in stone yet; rather, they seem like good practices, but feedback is still needed on how useful they are and if there are any situations where they are lacking.</p>
<ul>
<li>Test work before push or PR</li>
<li>Separate test types in separate files</li>
<li>Use analogous names</li>
<li>Use analogous paths</li>
<li>Keep unit test assertions to a minimum</li>
</ul>
<h4><a class="anchor" id="autotoc_md235"></a>
Test Work Before Push or PR</h4>
<p >Make sure existing tests related to a change are still applicable and still pass before distributing the change (i.e., pushing, making a pull request, etc.). Add new tests as needed for changes not covered by existing tests.</p>
<p >If new tests are needed, but creating them is not immediately feasible, create one or more tickets/issues for adding such tests in the future.</p>
<h4><a class="anchor" id="autotoc_md236"></a>
Separate Test Types in Separate Files</h4>
<p >Keep unit tests, integration tests, etc., in separate files dedicated to that type of test. This is helpful for several reasons, including isolating which overall group of tests get run.</p>
<h4><a class="anchor" id="autotoc_md237"></a>
Use Analogous Names</h4>
<p >To help give clarity to what relates to what, use analogous names for associated test items. This should be the source code item's name(*), with either a standard prefix or suffix added.</p>
<ul>
<li>files<ul>
<li>base: source code filename</li>
<li>suffix: <code>_Test</code>/<code>Test</code> for unit tests or <code>_IT</code>/<code>IT</code> for integration tests<ul>
<li>e.g., <code>HY_FlowPath.cpp</code> and <code>HY_FlowPath_Test.cpp</code></li>
</ul>
</li>
</ul>
</li>
<li><em>test fixtures</em>, <em>test suites</em>, and associated classes<ul>
<li>base: <em>upper camel case</em> form(*) of source code class</li>
<li>suffix: <code>Test</code> for unit tests or <code>IT</code> for integration tests</li>
</ul>
</li>
<li>test names<ul>
<li>base: <em>upper camel case</em> form(*) of source code function</li>
<li>prefix: <code>Test</code></li>
<li>suffix: optional(**) alphanumeric identifier (e.g., <code>1</code>, <code>1a</code>, <code>1b</code>)</li>
</ul>
</li>
<li>Underscores are not allowed in identifiers that become part of a test's <b>full name</b> by <b>Google Test</b>, which will be based on the <b>test fixture</b> name (when one is used) and the test's name; thus, for fixture classes and test functions, the applicable bases should be converted.</li>
</ul>
<p >** The intent of an additional suffix on test name would be to differentiate a case such as two very similar tests, like two that have exactly the same logic but operate on two different example input cases.</p>
<h4><a class="anchor" id="autotoc_md238"></a>
Use Analogous Paths</h4>
<p >To help with finding associated test code files, mirror the directory structure under <code>test/</code> of the path to the associated source file. E.g., functions defined in <code>models/hymod/include/Hymod.h</code> should have unit tests in <code>test/models/hymod/include/HymodTest.cpp</code>.</p>
<h4><a class="anchor" id="autotoc_md239"></a>
Keep Unit Test Assertions to a Minimum</h4>
<p >For unit tests, try to keep the number of assertions (and perhaps comparisons in general) to a minimum, to help isolate individual aspect of behavior being tested. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Nov 9 2023 20:01:22 for NGen by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
