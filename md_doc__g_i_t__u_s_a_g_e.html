<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NGen: Git Strategy</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NGen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_doc__g_i_t__u_s_a_g_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Git Strategy </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><a href="#branching-design">Branching Design</a></li>
<li><a href="#contributing">Contributing</a><ul>
<li><a href="#contributing-tldr">TLDR;</a></li>
<li><a href="#fork-consistency-requirements">Fork Consistency Requirements</a></li>
<li><a href="#fork-setup-suggestions">Fork Setup Suggestions</a></li>
</ul>
</li>
<li><a href="#keeping-forks-up-to-date">Keeping Forks Up to Date</a><ul>
<li><a href="#setting-the-upstream-remote">Setting the upstream Remote</a></li>
<li><a href="#getting-upstream-changes">Getting Upstream Changes</a></li>
<li><a href="#rebasing-development-branches">Rebasing Development Branches</a></li>
<li><a href="#fixing-diverging-development-branches">Fixing Diverging Development Branches</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md104"></a>
Branching Design</h1>
<ul>
<li>Main <b>upstream</b> repo has only the single long-term branch called <b>master</b>; i.e., <code>upstream/master</code><ul>
<li>There may occasionally be other temporary branches for specific purposes</li>
</ul>
</li>
<li>Interaction with <b>upstream</b> repo is done exclusively via pull requests (PRs) to <code>upstream/master</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md105"></a>
Contributing</h1>
<ul>
<li><a href="#contributing-tldr">TLDR;</a></li>
<li><a href="#fork-consistency-requirements">Fork Consistency Requirements</a></li>
<li><a href="#fork-setup-suggestions">Fork Setup Suggestions</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md106"></a>
Contributing TLDR;</h2>
<p>To work with the repo and contribute changes, the basic process is as follows:</p>
<ul>
<li>Create your own fork in Github of the main <b>upstream</b> repository</li>
<li>Clone your fork on your local development machine</li>
<li>Make sure to keep your fork and your local clone(s) up to date with the main upstream repo, keeping histories consistent via rebasing</li>
<li>In the local repo, push the changes you make to your Github fork</li>
<li>Submit pull requests to <code>upstream/master</code> when you have changes ready to be added</li>
</ul>
<h2><a class="anchor" id="autotoc_md107"></a>
Fork Consistency Requirements</h2>
<p>Within your own local repo and personal fork, you are mostly free to do whatever branching strategy works for you. However, branches used for PRs must have all new commits based on the current <code>HEAD</code> commit of the <code>upstream/master</code> branch, to ensure the repo history remains consistent. I.e., you need to make sure you rebase the branch with your changes before making a PR. How you go about this is up to you, but the following suggested setup will make that relatively easy.</p>
<h2><a class="anchor" id="autotoc_md108"></a>
Fork Setup Suggestions</h2>
<p>After creating your fork in Github, clone your local repo from the fork. This should make your fork a remote for you local repo, typically named <b>origin</b>. Then, <a href="#setting-the-upstream-remote">add the <b>upstream</b> as a second remote</a> in your local repo.</p>
<p>Have your own <code>master</code> branch, on your local clone and within your personal fork, just as <a href="#getting-upstream-changes">a place to rebase changes from <code>upstream/master</code></a>. Do not do any development work or add any of your own changes directly. Just keep it as a "clean," current copy of the <code>upstream/master</code> branch. <br  />
</p>
<p>Use separate branches for development work as you see fit. When preparing to make a PR, create a new branch just for that PR, making sure it is both up to date with <b>upstream</b> and has all the desired local changes. Wait to actually push it to your fork until that has been done and your are ready create the PR.</p>
<p>A separate, "clean" local <code>master</code> should be easy to keep it in sync with <code>upstream/master</code>, which in turn will make it relatively easy to rebase local development branches whenever needed. This simplifies maintaining the base-commit consistency requirement for the branches you will use for pull requests.</p>
<p>Clean up above mentioned PR branches regularly (i.e., once their changes get incorporated). You may also want to do this for the other development branches in your fork, or else you'll end up with branches having <a href="#fixing-diverging-development-branches">diverged histories that need to be fixed</a>.</p>
<h1><a class="anchor" id="autotoc_md109"></a>
Keeping Forks Up to Date</h1>
<ul>
<li><a href="#setting-the-upstream-remote">Setting the upstream Remote</a></li>
<li><a href="#getting-upstream-changes">Getting Upstream Changes</a></li>
<li><a href="#rebasing-development-branches">Rebasing Development Branches</a></li>
<li><a href="#fixing-diverging-development-branches">Fixing Diverging Development Branches</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md110"></a>
Setting the &lt;strong&gt;upstream&lt;/strong&gt; Remote</h2>
<p>To stay in sync with other separate changes added to <b>upstream</b>, you will typically need to add the main upstream repository as a Git <b>remote</b> on your local development machine. The standard convention, used here and elsewhere, is to name that remote <b>upstream</b>. Doing the addition will look something like: </p><pre class="fragment"># Add the remote 
git remote add upstream https://github.com/NOAA-OWP/ngen.git

# Verify
git remote -v
</pre> <h2><a class="anchor" id="autotoc_md111"></a>
Getting Upstream Changes</h2>
<p>When you want to check for or apply updates to your fork (and your local repo), locally check out your <code>master</code> branch and do fetch-and-rebase, which can be done with <code>pull</code> and the <code>--rebase</code> option: </p><pre class="fragment"># Checkout local master branch 
git checkout master

# Fetch and rebase changes
git pull --rebase upstream master
</pre><p> Then, make sure these get pushed to your fork. Assuming a typical setup where you have cloned from your fork, and you still have <code>master</code> checked out, that is just: </p><pre class="fragment"># Note the assumptions mentioned above that required for this syntax
git push
</pre><p> Depending on your individual setup, you may want to do this immediately (e.g., if your <code>master</code> branch is "clean", as <a href="#fork-setup-suggestions">discussed in the forking suggestions</a>), or wait until your local <code>master</code> is in a state ready to push to your fork.</p>
<h2><a class="anchor" id="autotoc_md112"></a>
Rebasing Development Branches</h2>
<p>When the steps in <a href="#getting-upstream-changes">Getting Upstream Changes</a> do bring in new commits that update <code>master</code>, you should rebase your other local branches. E.g., </p><pre class="fragment"># If using a development branch named 'dev'
git checkout dev
git rebase master
</pre><p> Alternatively, you can do an interactive rebase. This will open up a text editor allowing you to rearrange, squash, omit, etc. your commits when you rebase your development branch onto the new state of <code>master</code>. </p><pre class="fragment">git rebase -i master
</pre> <h2><a class="anchor" id="autotoc_md113"></a>
Fixing Diverging Development Branches</h2>
<p>If you have already pushed a local development branch to your fork, and then later need to rebase the branch, doing so will cause the history to diverge. If you are the only one using your fork, this is easy to fix by simply force-pushing your rebased local branch. </p><pre class="fragment"># To force-push to fix a divergent branch
git push -f origin dev
</pre><p> However, you will need to be careful with this if you are not the only one using you fork (e.g., you are collaborating with someone else on a large set of changes for some new feature). The particular considerations and best ways to go about things in such cases are outside the scope of this document. Consult Git's documentation and Google, or contact another contributor for advice. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Oct 29 2021 14:37:04 for NGen by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
